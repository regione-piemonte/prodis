<!--
SPDX-FileCopyrightText: Copyright 2022 | Regione Piemonte
SPDX-License-Identifier: EUPL-1.2
-->
<h3>{{ 'PROSPETTO.PROVINCE.DETTAGLIO_PROV.SUB_TITLE.REF_OFFICE' | translate}}</h3>
<form *ngIf="form" [formGroup]="form">
    <div class="row">
        <div class="form-group col-sm-12 col-md-2">
            <label for="lavdip">{{ 'PROSPETTO.PROVINCE.DETTAGLIO_PROV.FIELD.TOTAL_NUMB_EMPL' | translate}} <span class="oblg" title="campo obbligatorio">*</span></label>
            <input type="text" (change)="onChange()" maxlength="5" prodisDigitOnly prodisHasValueClass formControlName="nTotaleLavoratDipendenti" class="form-control" id="lavdip">
            <!-- div *ngIf="f?.nTotaleLavoratDipendenti?.errors" class="text-danger">
              <div *ngIf="f?.nTotaleLavoratDipendenti?.errors?.required">{{'ERROR.FIELD.REQUIRED' | translate}}</div>
            </div -->
        </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-12 col-md-6">
          <h4>Recapito sede principale</h4>
      </div>
      <div class="form-group col-sm-12 col-md-2">
        <button (click)="onClickCercaSede()" class="btn btn-outline-primary mt-lg-btn-form">Cerca sede</button>
      </div>
      </div>
      <div class="row" formGroupName="prospettoProvSede">
        <div class="form-group col-sm-12 col-md-3" formGroupName="comune">
            <label for="codcomune">{{ 'PROSPETTO.PROVINCE.DETTAGLIO_PROV.FIELD.COD_COMUNE' | translate}} <span class="oblg" title="campo obbligatorio">*</span></label>
            <input type="text" (change)="onChange()" prodisHasValueClass formControlName="codComuneMin" class="form-control" id="codcomune">
            <div *ngIf="f?.prospettoProvSede?.controls?.comune?.controls?.codComuneMin?.touched && f?.prospettoProvSede?.controls?.comune?.controls?.codComuneMin?.errors" class="text-danger">
              <div *ngIf="f?.prospettoProvSede?.controls.comune?.controls?.codComuneMin?.errors?.minlength">Inserire almeno 3 caratteri</div>
            </div>
        </div>
        <div class="form-group col-sm-12 col-md-7" formGroupName="comune">
          <label for="comune">Comune <span class="oblg" title="campo obbligatorio">*</span></label>
          <input type="text" (change)="onChange()" maxlength="50" prodisHasValueClass formControlName="dsProTComune" class="form-control" id="comune">
          <div *ngIf="f?.prospettoProvSede?.controls?.comune?.controls?.dsProTComune?.touched && f?.prospettoProvSede?.controls?.comune?.controls?.dsProTComune?.errors" class="text-danger">
            <div *ngIf="f?.prospettoProvSede?.controls.comune?.controls?.dsProTComune?.errors?.minlength">Inserire almeno 3 caratteri</div>
          </div>
        </div>
        <div class="form-group col-sm-12 col-md-2">
          <button
          [disabled]="!(f?.prospettoProvSede?.controls?.comune?.controls?.dsProTComune?.value?.length > 2
                    || f?.prospettoProvSede?.controls?.comune?.controls?.codComuneMin?.value?.length > 2)"
          (click)="onClickFindComune()" class="btn btn-outline-primary mt-lg-btn-form">Cerca</button>
       </div>
      </div>
      <div class="row" formGroupName="prospettoProvSede">
        <div class="form-group col-sm-12 col-md-8">
            <label for="indirizzo">Indirizzo <span class="oblg" title="campo obbligatorio">*</span></label>
            <input type="text" (change)="onChange()" prodisHasValueClass formControlName="indirizzo" class="form-control" id="indirizzo">
        </div>
        <div class="form-group col-sm-12 col-md-4">
          <label for="cap">CAP <span class="oblg" title="campo obbligatorio">*</span></label>
          <input type="text" (change)="onChange()" maxlength="5" prodisDigitOnly prodisHasValueClass formControlName="cap" class="form-control" id="cap">
        </div>
        <div *ngIf="f.prospettoProvSede?.controls?.cap?.errors" class="text-danger">
          <div *ngIf="f.prospettoProvSede?.controls?.cap?.minlength">il Cap deve essere lungo 5 caratteri</div>
        </div>
      </div>
      <div class="row" formGroupName="prospettoProvSede">
        <div class="form-group col-sm-12 col-md-4">
            <label for="telefono">Telefono <span class="oblg" title="campo obbligatorio">*</span></label>
            <input type="text" (change)="onChange()" prodisHasValueClass prodisDigitOnly maxlength="15" formControlName="telefono" class="form-control" id="telefono">
        </div>
        <div class="form-group col-sm-12 col-md-4">
          <label for="fax">FAX <span class="oblg" title="campo obbligatorio">*</span></label>
          <input type="text" (change)="onChange()" prodisHasValueClass prodisDigitOnly maxlength="15" formControlName="fax" class="form-control" id="fax">
        </div>
        <div class="form-group col-sm-12 col-md-4">
          <label for="mail">Email <span class="oblg" title="campo obbligatorio">*</span></label>
          <input type="text" (change)="onChange()" prodisHasValueClass formControlName="email" class="form-control" id="mail">
        </div>
      </div>

      <h4>Dati referente</h4>

      <div class="row" formGroupName="prospettoProvSede">
        <div class="form-group col-sm-12 col-md-6">
          <label for="cognome">Cognome</label>
          <input type="text" (change)="onChange()" prodisHasValueClass formControlName="cognomeReferente" class="form-control" id="cognome">
        </div>
        <div class="form-group col-sm-12 col-md-6">
          <label for="nome">Nome</label>
          <input type="text" (change)="onChange()" prodisHasValueClass formControlName="nomeReferente" class="form-control" id="nome">
       </div>
    </div>
</form>
<div class="row">
  <div class="col">
    <button type="button" (click)="onClickReset()"  class="btn btn-outline-secondary btn-sm">ANNULLA</button>
  </div>
  <div class="col-auto">
    <button type="button"
      (click)="salvaInBozza()"
      class="btn btn-primary ml-auto btn-lg"
      >{{'APP.SAVE_DRAFT' | translate }}</button>
  </div>
</div>
